{% extends 'base/vistas_base.html' %}
{% load static  %}
{%block title%}Hola Cliente{%endblock%}


<!-- CSS individuales -->
{% block css %}
    <link rel="stylesheet" href="{% static "vendor/fullcalendar/dist/fullcalendar.print.css"%}" media='print'>
    <link rel="stylesheet" href="{% static "vendor/fullcalendar/dist/fullcalendar.min.css" %}">
{% endblock %}

{% block content %}
<div class="content">
    <div class="row">
        <div class="col-lg-12">
            <div class="hpanel">
                <!--<div class="panel-heading mayusculas">
                    Hola
                </div>-->
                <div class="panel-body">
                        <div class="text-center m-b-md" id="wizardControl">
                            <a class="btn btn-info" href="#step1" data-toggle="tab">Citas</a>
                            <a class="btn btn-default" href="#step2" data-toggle="tab">Planes</a>
                            <a class="btn btn-default" href="#step3" data-toggle="tab">Tu información</a>
                            <a class="btn btn-default" href="#step4" data-toggle="tab">Información tu asesor</a>
                            <a class="btn btn-default" href="#step5" data-toggle="tab">Agregar una Recomendacion</a>
                        </div>
                        <div class="tab-content">
                        <div id="step1" class="p-m tab-pane active">
                            <div class="row">
                                <div class="col-lg-2 text-center">
                                    <i class="pe-7s-date fa-5x text-muted"></i>
                                    <p class="middle m-t-md">
                                        <strong>Tus citas. <br>Organizate a tus tiempos </strong>
                                    </p>
                                </div>
						        <div class="col-lg-10">
						        	<div id="calendar"></div>
						        </div>
                            </div>
                        </div>

                        <div id="step2" class="p-m tab-pane">
                            <div class="row">
                                <div class="col-lg-2 text-center">
                                    <i class="pe-7s-portfolio fa-5x text-muted"></i>
                                    <p class="middle m-t-md">
                                        <strong>Revisa aquí los planes que tenemos para ti</strong>
                                    </p>
                                </div>
                                <div class="col-lg-10">
                                   <div class="content animate-panel">
										<div class="row">
											<div class="col-lg-4">
										        <div class="hpanel hblue">
										            <div class="panel-heading hbuilt">
										                <div class="panel-tools">
										                    <a class="showhide"><i class="fa fa-chevron-up"></i></a>
										                    <a class="closebox"><i class="fa fa-times"></i></a>
										                </div>
										                <h4>Plan 1</h4>
										            </div>
										            <div class="panel-body">
									               		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Modi minima asperiores accusamus illo totam mollitia officiis autem deserunt sed, hic odit nulla enim, in velit pariatur dolor sequi. Error, dolores!</p>
									            	</div>
										            <div class="panel-footer">
										                Agregado a través de <strong>Panel de Control</strong>
										            </div>
										        </div>
										    </div>
											<div class="col-lg-4">
										        <div class="hpanel hyellow">
										            <div class="panel-heading hbuilt">
										                <div class="panel-tools">
										                    <a class="showhide"><i class="fa fa-chevron-up"></i></a>
										                    <a class="closebox"><i class="fa fa-times"></i></a>
										                </div>
										                <h4>Plan 2</h4>
										            </div>
										            <div class="panel-body">
										            	<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Praesentium sapiente consectetur, velit laboriosam provident ipsa, officia veritatis distinctio eius eos ad dolor quisquam a, fuga soluta et quasi deserunt ea.</p>
									            	</div>
										            <div class="panel-footer">
										                Agregado a través de <strong>Panel de Control</strong>
										            </div>
										        </div>
										    </div>
										    <div class="col-lg-4">
										        <div class="hpanel hgreen">
										            <div class="panel-heading hbuilt">
										                <div class="panel-tools">
										                    <a class="showhide"><i class="fa fa-chevron-up"></i></a>
										                    <!--<a class="closebox"><i class="fa fa-times"></i></a>-->
										                </div>
										                <h4>Plan 3</h4>
										            </div>
										            <div class="panel-body">
										            	<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere, architecto aperiam perspiciatis vero eligendi similique totam, debitis quo ratione a adipisci quasi assumenda provident quaerat quae, distinctio consequatur voluptatem? Magnam.</p>
									            	</div>
										            <div class="panel-footer">
										                Agregado a través de <strong>Panel de Control</strong>
										            </div>
										        </div>
										    </div>
										</div>
									</div>
                                </div>
                            </div>
                        </div>
                        <!-- Información cliente -->
                        <div id="step3" class="tab-pane">
                            <div class="row">

								               <div class="col-lg-2 text-center">
                                    <i class="pe-7s-user fa-5x text-muted"></i>
                                    <p class="middle m-t-md">
                                        <strong>Actualiza tu información</strong>
                                    </p>
                                </div>
                                <form method="POST" class="post-form">
                                  {% csrf_token %}

                                <div class="col-lg-10">
                                    <!-- INFROMACION GEOGRAFICA -->
                                    <hr>
                                	<h3 class="titulo1">Información Geográfica</h3>
                                	<br>
                                    <div class="row">
                                      {{direccion.as_p}}
                                    </div>
                                    <!-- INFORMACION DE PROPUESTA-->
                                    <hr>
                                	<h3 class="titulo1">Información Contacto</h3>
                                	<br>
                                    <div class="row">
                                        <div class="form-group col-lg-12">
                                            <div class="row">
                                              {{contacto.as_p}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-right m-t-xs">
		                                <button type="sumbit" class="btn btn-success ">Subir Cambios</button>
		                            </div>
                                </div>
	                            </form>
                            </div>
                        </div>
                        <div id="step4" class="p-m tab-pane">
                          <div class="row">
                            <div class="col-lg-2 text-center">
                              <i class="pe-7s-users fa-5x text-muted"></i>
                              <p class="middle m-t-md">
                                  <strong>Revisa la información de tu asesor</strong>
                                  <br/>
                              </p>
                            </div>
                            <div class="col-lg-10">
                                <div class="row">
                                  <hr>
                                    <h3 class="titulo1">Información personal</h3>
                                  <br>
                                    <table>
                                      <h4>
                                      <span class="pe-7s-user fa-1x text-muted icono"></span>  Nombre: {{asesor.idAsesor.persona.user.first_name}}  {{asesor.idAsesor.persona.user.last_name}}
                                      </h4><br>
                                      <h4>
                                      <span class="pe-7s-phone fa-1x text-muted icono"></span>  Telefono: {{contactoA.celular}}
                                      </h4><br>
                                      <h4>
                                      <span class="pe-7s-mail fa-1x text-muted icono"></span>  Correo: {{asesor.idAsesor.persona.user.email}}
                                      </h4><br>
                                  </table>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div id="step5" class="p-m tab-pane ">
                          <div class="row">
                            <div class="col-lg-2 text-center">
                              <i class="pe-7s-date fa-5x text-muted"></i>
                              <p class="middle m-t-md">
                                <strong>Tus citas. <br>Organizate a tus tiempos </strong>
                              </p>
                            </div>
                            <div class="col-lg-10">
                              <div class="form-group col-lg-10">
                                <form method="POST" action="{% url 'cliente:recomendar'%}">
                                  {% csrf_token %}

                                  <div class="row">
                                    {{recomendacion.as_p}}
                                  </div>
                                  <button type="sumbit" class="btn btn-success ">Recomendar</button>
                                </form>
                              </div>
                            </div>
                          </div>
                        </div>
                    <div class="m-t-md">
                        <p>
                            <strong>Aviso de confidencialidad: </strong>This is a wizard form which can be easy adjusted. Since each step is a tab, and each clik to next tab is a function you can easily add validation or any other functionality. <strong><i class="fa fa-lock"></i> </strong>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
  <script src="{% static "vendor/moment/min/moment.min.js" %}"></script>
  <script src="{% static "vendor/fullcalendar/dist/fullcalendar.min.js" %}"></script>
  <script src="{% static "vendor/fullcalendar/dist/lang-all.js" %}"></script>

  <script>
    
  function activar(){
    $(this).click();
    console.log(""+$(this));
      $('#calendar').fullCalendar('render');
    }

    $(function(){

        /* initialize the calendar
         -----------------------------------------------------------------*/
        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        $('#calendar').fullCalendar({
          //lang: 'es',
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            editable: true, //true
            droppable: false, //true, this allows things to be dropped onto the calendar
            drop: function() {
                // is the "remove after drop" checkbox checked?
                if ($('#drop-remove').is(':checked')) {
                    // if so, remove the element from the "Draggable Events" list
                    $(this).remove();
                }
            },
            events: [
              
                {
                    title: 'Meerkats',
                    start: new Date(y, m, 1)
                },
                {
                    title: 'Long Event',
                    start: new Date(y, m, d-5),
                    end: new Date(y, m, d-2),
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: new Date(y, m, d-3, 16, 0),
                    allDay: false,
                },
                {
                    title: 'Homer task',
                    start: new Date(y, m, d + 5, 19, 0),
                    end: new Date(y, m, d + 6, 22, 30),
                    allDay: false,
                    backgroundColor: "#62cb31",
                    borderColor: "#62cb31"
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: new Date(y, m, d+4, 16, 0),
                    allDay: false
                },
                {
                    title: 'Meeting',
                    start: new Date(y, m, d, 10, 30),
                    allDay: false
                },
                {
                    title: 'Lunch',
                    start: new Date(y, m, d, 12, 0),
                    end: new Date(y, m, d, 14, 0),
                    allDay: false
                },
                {
                    title: 'Birthday Party',
                    start: new Date(y, m, d+1, 19, 0),
                    end: new Date(y, m, d+1, 22, 30),
                    allDay: false
                },
                {
                    title: 'Click for Google',
                    start: new Date(y, m, 28),
                    end: new Date(y, m, 29),
                    url: 'http://google.com/'
                }
            ],
        });

      //Funcion da estilo a botones
        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            $('a[data-toggle="tab"]').removeClass('btn-success');
            $('a[data-toggle="tab"]').addClass('btn-default');
            $(this).removeClass('btn-default');
            $(this).addClass('btn-info');
        })

        /* initialize the external events
         -----------------------------------------------------------------*/
        $('#external-events div.external-event').each(function() {

            // store data so the calendar knows to render an event upon drop
            $(this).data('event', {
                title: $.trim($(this).text()), // use the element's text as the event title
                stick: true // maintain when user navigates (see docs on the renderEvent method)
            });

            // make the event draggable using jQuery UI
            $(this).draggable({
                zIndex: 1111999,
                revert: true,      // will cause the event to go back to its
                revertDuration: 0  //  original position after the drag
            });

        });

        activar();
    });
  </script>
{% endblock %}




